os: osx
osx_image: xcode12.2
before_install:
- brew update
- touch $HOME/sum.sha256
- echo "0f910a98c138ac70edec7058647b3e7f247db4a080bf262e0fb3d7528ed99483 *$HOME/AIRSDK_Compiler.dmg"
  >> $HOME/sum.sha256
- echo "17fda7ac8d3e476cad3127f345455ef316acfb87c6f4322e5897bd8d9b09388e *$HOME/apache-flex-sdk-4.16.1-bin.tar.gz"
  >> $HOME/sum.sha256
- wget -P $HOME https://archive.apache.org/dist/flex/4.16.1/binaries/apache-flex-sdk-4.16.1-bin.tar.gz
- wget -P $HOME https://airdownload.adobe.com/air/mac/download/32.0/AIRSDK_Compiler.dmg
- shasum -a 256 --check $HOME/sum.sha256
- tar xzf $HOME/apache-flex-sdk-4.16.1-bin.tar.gz
- mv apache-flex-sdk-4.16.1-bin $HOME/
- hdiutil mount $HOME/AIRSDK_Compiler.dmg
- ditto /Volumes/AIR\ SDK/ $HOME/apache-flex-sdk-4.16.1-bin/
- export PATH=$HOME/apache-flex-sdk-4.16.1-bin/bin:$PATH
install:
- echo "do nothing"
before_script:
- echo "do nothing"
script:
- echo "do nothing"
before_deploy:
- mkdir build
- TAG_VERSION=${TRAVIS_TAG%%-*}
- FILENAME=NNDD_${TAG_VERSION//./_}
- wget -P ./build https://github.com/SSW-SCIENTIFIC/NNDD/releases/download/$TRAVIS_TAG/${FILENAME}.air
- ls -al build/
- adt -package -target native $(pwd)/build/${FILENAME}.dmg $(pwd)/build/${FILENAME}.air
deploy:
  provider: releases
  api_key:
    secure: "HGm6o87AZ5PNw/cU9CZndGyCnqwnIvOCXJO1GGJbfos699IR4dOhnwnbfr2WahhjYeuO1O18mYJ+AGqJFIGRX+BRDTzUfB6Se4dMXHNEJ9h/3ubLMA7cnZDt6AWnX2T8uvav2qwhNPSnu3y/+91Cn1McTPhAs9Ac0t89BiSSVr/GQ23GnDKEfxICtXXZdZ+UNmQspOKQCk0GkXV99gm9iX5q+a5GuCnuC8nPhtQ6IHySjgB6TgQT3FWzqan0Drry+BoGJZupLkn0YjiFMflaS4SnDxogf6xKVPUdiDpgZW2CbO88ikWDkxma+BEp16sRf4OMbZAfWgu901MtEAmxxV4YAp/YfThgB0HbwKL58uq/dTr4/so4bPgfRgJ7I9yZonO3rsHFCSvEIbbDqFVNlqIKb6fmVlbBBeuFDc4YoTQPOTRpj3nEJdViElNejAscAMDGKKf9oiIMB1jzS4uC1UC4sI62uOHxzZGiUKqCOteA35Q7xrZwLy0dSWRbpbBcSlFWmAvFInxJnP1h5il3Y2l+8bRzYLoHF0jS96VU0sR2niCjUD1jZwL52VW8TINPDRnrY6ku8Ik9rDKoLaIywccHhvO9U6KD7sbEu4eEvoEpGb4znnDzHp6oN8lkgI0m5J1IMLrtNuCTUu7bWpgy+NFcWyC+Oa44id3n82uT/9s="
  file: build/${FILENAME}.dmg
  skip_cleanup: true
  on:
   tags: true 
